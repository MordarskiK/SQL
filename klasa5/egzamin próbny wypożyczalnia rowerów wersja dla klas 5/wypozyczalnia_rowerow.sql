DROP DATABASE IF EXISTS wypozyczalnia_rowerow;

CREATE DATABASE wypozyczalnia_rowerow DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;

USE wypozyczalnia_rowerow;
				
CREATE TABLE klienci (id_k INT auto_increment PRIMARY KEY,
					  imie_k VARCHAR (45),
					  nazwisko_k VARCHAR (45),
					  ulica_k VARCHAR (45),
					  numer_k VARCHAR(10),
					  miasto_k VARCHAR (45),
					  kod_k VARCHAR (6),
					  telefon_k VARCHAR (14),
					  e_mail_k VARCHAR (45)
					  );

CREATE TABLE pracownicy (id_p INT auto_increment PRIMARY KEY,
					     imie_p VARCHAR (45),
					     nazwisko_p VARCHAR (45),
					     miasto_p VARCHAR (45),
					     telefon_p VARCHAR (14),
						 szef_p INT
					     );
						
CREATE TABLE rower_typ (id_rt INT auto_increment PRIMARY KEY,
					    typ VARCHAR (45)
					    );	

CREATE TABLE rowery (id_r INT auto_increment PRIMARY KEY,
					 model VARCHAR (45),
					 data_prod YEAR,
					 typ INT,
					 dostepnosc INT,
					 CONSTRAINT rt_1 FOREIGN KEY (typ) REFERENCES rower_typ (id_rt) ON DELETE no action ON UPDATE cascade
					 );

CREATE TABLE wypozyczenia (id_w INT auto_increment PRIMARY KEY,
                           data_wyp DATE,
						   data_zwr DATE,
						   klient INT,
						   pracownik INT,
						   CONSTRAINT k_1 FOREIGN KEY (klient) REFERENCES klienci (id_k) ON DELETE set null ON UPDATE cascade,
						   CONSTRAINT p_1 FOREIGN KEY (pracownik) REFERENCES pracownicy (id_p) ON DELETE set null ON UPDATE cascade	
						   );

CREATE TABLE dane_wypozyczenia (wypozyczenie INT,
								rower INT,
						        cena_doba FLOAT,
						        ilosc_dob INT,
								CONSTRAINT w_1 FOREIGN KEY (wypozyczenie) REFERENCES wypozyczenia (id_w) ON DELETE no action ON UPDATE cascade,
								CONSTRAINT r_1 FOREIGN KEY (rower) REFERENCES rowery (id_r) ON DELETE no action ON UPDATE cascade
								);
				
INSERT INTO klienci (imie_k,nazwisko_k,ulica_k,numer_k,miasto_k,kod_k,telefon_k,e_mail_k) 
VALUES ('Damian','Stelmach','Mokra','6','Grajewo','19-200','985-746-350','stelmaszczyk@wp.pl'),
	   ('Adam','Wrzosek','Sucha','16','Bielsko-Biała','43-400','756-358-068','wrzosek_adam@gmail.com'),
	   ('Mateusz','Karwowski','Ciepla','12','Gliwice','44-100','674-968-785','mati_25@onet.pl'),
	   ('Anna','Ajewska','Wolna','21/3','Biłgoraj','23-400','455-734-224','konstytycja_jest_ok@gmail.com'),
	   ('Dawid','Stary','Kopernika','10/23','Brzegabrze','49-300','485-236-150','mlody_stary@wp.pl'),
	   ('Monika','Młoda','Mickiewicza','22/12','Zabrze','41-700','985-749-607','monia21@gmail.com'),
	   ('Weronika','Eczarska','Chorzowska','6/1','Chorzów','40-100','185-716-150','ecza_pecza@onet.pl'),
	   ('Marek','Marecki','Piotrowska','26','Łódź','90-000','856-368-028','marunio@wp.pl'),
	   ('Tomasz','Karwowski','Zimna','112','Białystok','15-000','485-769-617','karwowski_tomek@gmail.com'),
	   ('Grażyna','Witkowska','Andersa','67b/2','Kielce','25-000','345-726-354','witkowa17@onet.pl'),
	   ('Zbigniew','Swawolny','Opolska','166','Wrocław','55-030','726-358-088','zbusiu@wp.pl'),
	   ('Stefan','Maciejewski','Wrocławska','1/16','Katowice','40-010','785-729-647','stefanek_m@wp.pl'),
	   ('Wioletta','Frywolna','Zabrzańska','3','Świętochłowice','41-500','685-700-323','wiolka_f@onet.pl'),
	   ('Franciszek','Malczewska','Błotnista','1a/5','Kraków','33-030','746-318-168','malcze_fr@gmail.com'),
	   ('Wiktoria','Mrozek','Witosa','124','Zakopane','34-500','985-249-628','mro_wik@gmail.com');
																					
INSERT INTO pracownicy (imie_p,nazwisko_p,miasto_p,telefon_p,szef_p) 
VALUES ('Wojciech','Anders','Wrocław','185-256-340',NULL),
	   ('Modest','Nowacki','Brzeg','868-456-351',1),
	   ('Andrzej','Mróz','Kąty Wrocławskie','185-286-850',2),
	   ('Franciszka','Gwolik','Wrocław','285-897-250',2);

INSERT INTO rower_typ (typ) 
VALUES ('górski'),
       ('elektryczny'),
	   ('miejski'),
	   ('szosowy');

INSERT INTO rowery (model,data_prod,dostepnosc,typ) 
VALUES ('Romet R3',2021,5,1),
	   ('Romet R3',2021,4,1),
	   ('Romet R6.1',2022,3,1),
	   ('Romet R6.2',2022,6,1),
	   ('Romet Mustang',2022,2,1),
	   ('Romet Gizela',2022,4,2),
	   ('Romet Orkan',2022,5,2),
	   ('Kross Modo',2021,3,3),
	   ('Kross Evado',2020,6,3),
	   ('Kross Trans',2022,4,3),
	   ('Giant Advanced SL',2022,5,4),
	   ('Giant Advanced SX',2022,3,4),
	   ('Giant Advanced PRO',2022,1,4),
	   ('Giant TRC Advanced DISC',2022,2,4);


INSERT INTO wypozyczenia (data_wyp,data_zwr,klient,pracownik)
VALUES ('2022-04-10','2022-04-12',1,3),
	   ('2022-04-10','2022-04-13',2,2),
	   ('2022-04-10','2022-04-11',6,4),
	   ('2022-04-11','2022-04-12',NULL,3),
	   ('2022-04-11','2022-04-14',1,2),
	   ('2022-04-11','2022-04-13',7,3),
	   ('2022-04-11','2022-04-12',4,4),
	   ('2022-04-11','2022-04-15',12,2),
	   ('2022-04-15','2022-04-17',NULL,3),
	   ('2022-04-15','2022-04-16',11,1),
	   ('2022-04-15','2022-04-16',3,2),
	   ('2022-04-15','2022-04-18',6,2),
	   ('2022-05-01','2022-05-04',9,3),
	   ('2022-05-01','2022-05-04',1,3),
	   ('2022-05-01','2022-05-05',NULL,3),
	   ('2022-05-22','2022-05-24',1,2),
	   ('2022-05-22','2022-05-23',11,2),
	   ('2022-05-30','2022-06-01',13,4),
	   ('2022-06-03','2022-06-05',9,4),
	   ('2022-06-03','2022-06-05',8,4),
	   ('2022-06-10','2022-06-12',6,3),
	   ('2022-07-01','2022-07-03',3,NULL),
	   ('2022-07-04','2022-07-05',2,1),
	   ('2022-07-06','2022-07-07',13,2),
	   ('2022-07-11','2022-07-12',11,2),
	   ('2022-07-22','2022-07-23',9,3),
	   ('2022-07-30','2022-08-02',6,2),
	   ('2022-08-01','2022-08-06',3,2),
	   ('2022-08-02','2022-08-04',4,3),
	   ('2022-08-07','2022-08-10',9,NULL),
	   ('2022-08-11','2022-08-12',10,3),
	   ('2022-08-11','2022-08-12',1,4),
	   ('2022-08-11','2022-08-13',5,3),
	   ('2022-08-12','2022-08-15',7,4),
	   ('2022-08-15','2022-08-17',6,3),
	   ('2022-08-15','2022-08-18',12,2),
	   ('2022-08-15','2022-08-16',11,3),
	   ('2022-08-15','2022-08-16',9,1),
	   ('2022-08-18','2022-08-19',5,2),
	   ('2022-08-29','2022-09-01',2,2),
	   ('2022-09-01','2022-09-10',7,2),
	   ('2022-09-01','2022-09-05',8,3),
	   ('2022-09-01','2022-09-03',12,4),
	   ('2022-09-05','2022-09-07',9,4),
	   ('2022-09-05','2022-09-07',2,4),
	   ('2022-09-06','2022-09-08',5,4),
	   ('2022-09-07','2022-09-10',7,1),
	   ('2022-09-15','2022-09-17',6,2),
	   ('2022-09-16','2022-09-18',8,3),
	   ('2022-09-19','2022-09-20',9,3),
	   ('2022-09-19','2022-09-20',13,3),
	   ('2022-09-19','2022-09-20',10,2),
	   ('2022-09-19','2022-09-21',9,2),
	   ('2022-09-24','2022-09-25',8,3),
	   ('2022-10-05','2022-10-06',7,2),
	   ('2022-10-05','2022-10-06',2,3),
	   ('2022-10-07','2022-10-08',1,3),
	   ('2022-10-09','2022-10-11',5,4),
	   ('2022-10-14','2022-10-15',8,4),
	   ('2022-10-14','2022-10-15',3,4),
	   ('2022-10-20','2022-10-22',7,3),
	   ('2022-10-24','2022-10-27',4,4),
	   ('2022-11-05','2022-11-07',11,3),
	   ('2022-11-11','2022-11-12',5,1),
	   ('2022-11-12','2022-11-13',1,3),
	   ('2022-11-15','2022-11-18',4,1);

INSERT INTO dane_wypozyczenia (wypozyczenie,rower,cena_doba,ilosc_dob)
VALUES (1,2,50.00,2),
	   (1,5,50.00,2),
	   (2,3,50.00,3),
	   (2,6,70.00,3),
	   (3,11,90.00,1),
	   (3,13,90.00,1),
	   (4,1,50.00,1),
	   (4,2,50.00,1),
	   (5,4,50.00,3),
	   (6,3,50.00,2),
	   (7,3,50.00,1),
	   (8,5,50.00,4),
	   (8,11,90.00,4),
	   (8,12,90.00,4),
	   (9,6,70.00,2),
	   (10,14,90.00,1),
	   (11,13,90.00,1),
	   (12,1,50.00,3),
	   (12,1,50.00,3),
	   (13,3,50.00,3),
	   (14,5,50.00,3),
	   (15,7,70.00,4),
	   (16,2,50.00,2),
	   (16,9,40.00,2),
	   (16,11,90.00,2),
	   (17,12,90.00,1),
	   (18,14,90.00,2),
	   (19,6,70.00,2),
	   (20,7,70.00,2),
	   (21,9,40.00,2),
	   (22,10,40.00,2),
	   (23,12,90.00,1),
	   (23,2,50.00,1),
	   (24,4,50.00,1),
	   (25,6,70.00,1),
	   (26,7,70.00,1),
	   (27,6,70.00,3),
	   (27,5,50.00,3),
	   (28,9,40.00,5),
	   (29,11,90.00,2),
	   (30,12,90.00,3),
	   (31,11,90.00,1),
	   (31,10,40.00,1),
	   (32,4,50.00,1),
	   (33,1,50.00,2),
	   (34,1,50.00,3),
	   (35,2,50.00,2),
	   (35,4,50.00,2),
	   (36,9,40.00,3),
	   (37,3,50.00,1),
	   (37,7,70.00,1),
	   (38,12,90.00,1),
	   (39,11,90.00,1),
	   (40,10,40.00,3),
	   (41,7,70.00,9),
	   (42,9,40.00,4),
	   (43,1,50.00,2),
	   (44,12,90.00,2),
	   (45,14,90.00,2),
	   (46,12,90.00,2),
	   (47,1,50.00,3),
	   (47,6,70.00,3),
	   (48,3,50.00,2),
	   (48,9,40.00,2),
	   (49,2,50.00,2),
	   (50,10,40.00,1),
	   (51,13,90.00,1),
	   (52,14,90.00,1),
	   (52,11,90.00,1),
	   (53,1,50.00,2),
	   (54,2,50.00,1),
	   (55,7,70.00,1),
	   (56,4,50.00,1),
	   (57,6,70.00,1),
	   (58,10,40.00,2),
	   (59,11,90.0,1),
	   (61,12,90.00,2),
	   (61,14,90.00,2),
	   (62,1,50.00,3),
	   (63,4,50.00,2),
	   (64,7,70.00,1),
	   (64,5,50.00,1),
	   (65,9,40.00,1),
	   (66,6,70.00,3),
	   (66,11,90.00,3);